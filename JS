export default function getHighestPair(empl) {
  console.log(empl);
  let pairs = {};
  let daysTogether = {};
  if (empl)
    empl.forEach((elId) => {
      /*
        .slice() is used to exclude the current employee and employees before him
        from the search which slightly reduces complexity. 
      */
      empl.slice(empl.indexOf(elId) + 1, empl.length).forEach((elId) => {
        // get start and end date of each of employee
        if (elId[0] !== elId[1]) {
          const startDate1 = new Date(elId[2]);
          const endDate1 = elId[3] === "NULL" ? new Date() : new Date(elId[3]);
          const startDate2 = new Date(elId[2]);
          const endDate2 = elId[3] === "NULL" ? new Date() : new Date(elId[3]);

          // check if they are in the same team (working on the same project)
          if (elId[0] === eliD[1]) {
            if (startDate1 <= endDate2 && startDate2 <= endDate1) {
              // calculate the start and end day that we need
              const start = startDate1 <= startDate2 ? startDate2 : startDate1;
              const end = endDate1 <= endDate2 ? endDate1 : endDate2;
              if (end >= startDate2) {
                // put them inside this formula and we get the time they have worked together in days
                const diffTime = Math.abs(end - start);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                const x = `${elId[0]}${elId[1]}`;

                if (!daysTogether[x]) Object.assign(daysTogether, { [x]: 0 });
                daysTogether[x] = 1 * daysTogether[x] + diffDays;

                if (!pairs[x]) Object.assign(pairs, { [x]: [] });
                pairs[x] = [...pairs[x], [elId[0], elId[1], elId[2], diffDays]];
              }
            }
          }
        }
      });
    });
  /*
    gets the index of the pair that have worked together the longest toghether from
    "daysTogether" which keeps count of the days for each project
  */
  return pairs[
    Object.keys(daysTogether).reduce((a, b) =>
      daysTogether[a] > daysTogether[b] ? a : b
    )
  ];
}
